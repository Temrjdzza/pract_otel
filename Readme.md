# Документация API системы бронирования отелей

## Общее описание

Система предоставляет REST API для управления бронированием номеров в отеле.

## Эндпоинты

### 1. Получение списка номеров

```
GET /api/router.php/rooms
```

Параметры запроса:

| Параметр  | Тип     | Описание                  | Пример значения                  |
|-----------|---------|---------------------------|----------------------------------|
| room_type | string  | Тип номера для фильтрации | "люкс"                           |
| price     | decimal | Диапазон цен (мин-макс)   | "1000-5000"                      |
| capacity  | integer | Количество спальных мест  | 2                                |
| sort      | string  | Поле для сортировки       | "room_type", "price", "capacity" |
| order     | string  | Направление сортировки    | "asc", "desc"                    |

Пример запроса:

```
GET /api/router.php/rooms?room_type=люкс&price=1000-5000&capacity=2&sort=price&order=asc
```

Ответ:


```json
{
  "status": "success",
  "data": [
    {
      "room_id": 1,
      "room_type": "люкс",
      "price": 3000,
      "capacity": 2,
      "booked": false,
      "created_at": "2025-06-09 20:30:00",
      "updated_at": "2025-06-12 20:55:34",
      "images": [
          "https://localhost/image/photo_lux.jpg",
          "https://localhost/image/photo_lux1.jpg"
      ]
    }
  ]
}
```

### 2. Создание брони
```
POST /api/router.php/roomReservation
```

Параметры запроса:

| Параметр | Тип     | Описание            | Пример значения        |
|----------|---------|---------------------|------------------------|
| id       | integer | ID номера для брони | 1                      |
| fio      | string  | ФИО бронировщика    | "Иванов Иван Иванович" |
| booking_start | datetime | Дата и время начала бронирования | "2025-06-20 14:00:00" |
| booking_end | datetime | Дата и время окончания бронирования | "2025-06-22 12:00:00" |

Пример запроса:

```
POST /api/router.php/roomReservation?id=1&fio=Иванов Иван Иванович&booking_start=2025-06-20 16:00:00&booking_end=2025-06-22 12:00:00
```

Ответ при успешной бронировании:

```json
{
    "status": "success",
    "data": {
        "booking_id": "7",
        "room_id": "1",
        "guest_name": "Иванов Иван Иванович",
        "booking_start": "2025-06-20 16:00:00",
        "booking_end": "2025-06-22 12:00:00",
        "status": "active",
        "created_at": "2025-06-17 11:18:23",
        "updated_at": "2025-06-17 11:18:23",
        "room_type": "Люкс",
        "price": "15000.00",
        "capacity": "2",
        "description": "Президентский номер с видом на город"
    }
}
```

### 3. Получение списка контактов

```
GET /api/router.php/contacts
```

Параметры запроса:
```
GET /api/router.php/contacts
```

Ответ при успешном выполнении:

```json
{
    "status": "success",
    "data": [
        {
            "id": 1,
            "name": "Иван Петров",
            "email": "ivan@example.com",
            "phone": "+7 912 345 67 89"
        },
        ...
    ]
}
```

### 4. Получение отзывов об отеле

```
GET /api/router.php/reviews
```

Параметры запроса:
```
GET /api/router.php/reviews
```

Ответ при успешном выполнении:
```json
{
    "status": "success",
    "data": [
        {
            "id": 1,
            "fio": "Иванов Иван",
            "review": "Отличный отель!",
            "rating": 5,
            "created_at": "2025-06-10 12:00:00"
        },
        ...
    ],
    "average_rating": 4.5
}
```

### 5. Добавление отзыва об отеле

```
POST /api/router.php/review
```

Параметры запроса:

| Параметр |	Тип  |	Описание	          | Пример значения  |
|----------|---------|------------------------|------------------|
| fio      | string  | ФИО автора отзыва	  | "Иванов Иван"    |
| review   | string  | Текст отзыва	          | "Отличный отель!"|
| rating   | integer | Оценка (от 1 до 5)     |	5                |

Пример запроса:

```
POST /api/router.php/review?fio=Иванов Иван&review=Отличный отель!&rating=5
```

Ответ при успешном добавлении:
```json
{
    "status": "success",
    "message": "Отзыв добавлен",
    "data": {
        "id": 5,
        "fio": "Иванов Иван",
        "review": "Отличный отель!",
        "rating": 5,
        "created_at": "2025-06-20 15:30:00"
    }
}
```

## Коды ошибок

| Код | Описание                                      |
|-----|-----------------------------------------------|
| 200 | Успешный запрос                               |
| 400 | Неверные параметры или номер уже забронирован |
| 404 | Эндпоинт не найден                            |
| 500 | Внутренняя ошибка сервера                     |

